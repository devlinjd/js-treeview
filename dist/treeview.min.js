!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.TreeView=t()}(this,function(){return function(){function e(e,t){this.handlers={},this.node=t,this.data=e,n.call(this)}function t(e,t,n){var a,i=e.length;for(a=0;i>a;a++)t.call(n,e[a],a)}function n(){var e,n=document.getElementById(this.node),i=[],r=function(e){var n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");if(n.setAttribute("class","tree-leaf"),a.setAttribute("class","tree-leaf-content"),a.setAttribute("data-item",JSON.stringify(e)),i.setAttribute("class","tree-leaf-text"),i.textContent=e.name,l.setAttribute("class","tree-expando expanded"),l.textContent="-",a.appendChild(l),a.appendChild(i),n.appendChild(a),e.children.length>0){var s=document.createElement("div");s.setAttribute("class","tree-child-leaves"),t(e.children,function(e){var t=r(e);s.appendChild(t)}),n.appendChild(s)}else l.classList.add("hidden");return n};t(this.data,function(e){i.push(r.call(this,e))},this),n.innerHTML=i.map(function(e){return e.outerHTML}).join(""),e=function(e){var t=e.currentTarget.parentNode,n=JSON.parse(t.getAttribute("data-item")),i=t.parentNode.querySelector(".tree-child-leaves");i?i.classList.contains("hidden")?this.expand(t,i):this.collapse(t,i):a.call(this,"select",{target:e,data:n})}.bind(this),t(n.querySelectorAll(".tree-leaf-text"),function(t){t.onclick=e},this),t(n.querySelectorAll(".tree-expando"),function(t){t.onclick=e},this)}function a(e){var n=[].slice.call(arguments,1);if(!(i.indexOf(e)>-1))throw new Error(e+" event cannot be found on TreeView.");this.handlers[e]&&this.handlers[e]instanceof Array&&t(this.handlers[e],function(e){e.callback.apply(e.context,n)})}var i=["expand","collapse","select"];return e.prototype.expand=function(e,t){var n=e.querySelector(".tree-expando");n.textContent="-",t.classList.remove("hidden"),a.call(this,"expand",{target:e,leaves:t})},e.prototype.collapse=function(e,t){var n=e.querySelector(".tree-expando");n.textContent="+",t.classList.add("hidden"),a.call(this,"collapse",{target:e,leaves:t})},e.prototype.on=function(e,t,n){if(!(i.indexOf(e)>-1))throw new Error(e+" is not supported by TreeView.");this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push({callback:t,context:n})},e.prototype.off=function(e,t){var n,a=!1;this.handlers[e]instanceof Array&&(foreach(this.handlers[e],function(e,i){n=i,e.callback!==t||a||(a=!0)}),a&&this.handlers[e].splice(n,1))},e}()});